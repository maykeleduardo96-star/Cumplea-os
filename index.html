<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Para mi Ana ‚ù§Ô∏è</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Quicksand:wght@400;600&display=swap" rel="stylesheet">
    <style>
        * { box-sizing: border-box; }
        
        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            overflow: hidden; font-family: 'Quicksand', sans-serif;
            display: flex; align-items: center; justify-content: center;
            background: #0b0b1a url('https://images.unsplash.com/photo-1462331940025-496dfbfc7564?q=80&w=1000') no-repeat center center;
            background-size: cover;
            touch-action: manipulation;
        }

        .allow-scroll { overflow-y: auto !important; display: block !important; padding: 20px 0; }

        .overlay { 
            position: fixed; top: 0; left: 0; width: 100%; height: 100%; 
            background: radial-gradient(circle, rgba(0,0,0,0.2) 0%, rgba(0,0,0,0.6) 100%); 
            z-index: 1; 
        }

        .card {
            position: relative; z-index: 10;
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(25px); -webkit-backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.25);
            border-radius: 35px; padding: 30px 20px;
            width: 90%; max-width: 400px; min-height: 500px;
            margin: auto; display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            text-align: center; color: white;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
        }

        h1 { font-family: 'Dancing Script', cursive; font-size: 3rem; margin: 0 0 15px 0; color: #ff99cc; text-shadow: 0 0 20px rgba(255, 153, 204, 0.6); }
        
        .letter-content {
            text-align: left; font-size: 0.95rem; max-height: 280px;
            overflow-y: auto; padding-right: 10px; margin-bottom: 20px;
            border-top: 1px solid rgba(255,255,255,0.2); padding-top: 15px;
            line-height: 1.6;
        }

        .btn-main {
            background: linear-gradient(45deg, #ff416c, #ff4b2b);
            border: none; padding: 16px 0; border-radius: 50px;
            color: white; font-size: 1.1rem; font-weight: 700;
            width: 100%; max-width: 260px; cursor: pointer;
            box-shadow: 0 10px 25px rgba(255, 65, 108, 0.4);
            text-transform: uppercase; letter-spacing: 1px;
        }

        .btn-ghost { 
            background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.3); 
            padding: 12px; border-radius: 50px; color: white; width: 100%; 
            max-width: 260px; font-size: 0.9rem; margin-top: 15px; cursor: pointer;
        }

        .error-console { 
            color: #ff3333; font-family: 'Courier New', monospace; font-size: 0.8rem; text-align: left; 
            background: rgba(0,0,0,0.8); padding: 15px; border-radius: 15px; 
            width: 100%; min-height: 180px; border: 1px solid #ff3333;
        }

        /* TEXTO M√ÅGICO FINAL */
        #video-final-msg { 
            margin-top: 20px; font-family: 'Dancing Script', cursive; font-size: 1.6rem;
            color: #fff; min-height: 100px;
        }

        .typewriter-char {
            opacity: 0; display: inline-block;
            text-shadow: 0 0 10px #ff00ff, 0 0 20px #ff00ff, 0 0 30px #ff00ff;
            animation: appearChar 0.5s forwards;
            white-space: pre; /* Mantiene los espacios */
        }

        @keyframes appearChar {
            from { opacity: 0; transform: scale(3); filter: blur(10px); }
            to { opacity: 1; transform: scale(1); filter: blur(0); }
        }

        .hidden { display: none !important; }
        .video-container { width: 100%; border-radius: 15px; overflow: hidden; border: 2px solid #ff99cc; background: #000; }
        video { width: 100%; max-height: 220px; display: block; }
    </style>
</head>
<body>

    <div class="overlay"></div>
    <audio id="pookie-audio" loop>
        <source src="https://www.dropbox.com/scl/fi/i8pjh6dor59ef4xzu6hsf/Ed-Sheeran-Photograph-Subtitulado-al-Espa-ol..mp3?rlkey=vpe1cixqj20q3h7six0odizjb&st=2robfvey&dl=1" type="audio/mpeg">
    </audio>

    <div id="step1" class="card">
        <h1>Hola Ana ‚ù§Ô∏è</h1>
        <p>Este no es un sitio web com√∫n.<br>Es un pedacito de mi coraz√≥n para ti.</p>
        <button class="btn-main" onclick="iniciarExperiencia()">Amonos</button>
    </div>

    <div id="step2" class="card hidden">
        <div style="width: 170px; height: 170px; border-radius: 20px; border: 3px solid #ff99cc; overflow: hidden; margin-bottom: 20px;">
            <img src="https://www.dropbox.com/scl/fi/kktnissm1iyzltkt0bj7v/8f214fd9-fee4-4ce7-a275-17b4b6437de4.jpg?rlkey=qjqvxraqhbzdanaulrurjd2wj&st=dswefh8d&dl=1" style="width:100%; height:100%; object-fit:cover;">
        </div>
        <h2>Confirmaci√≥n Cr√≠tica</h2>
        <p>El sistema necesita saber si eres la cumplea√±era m√°s hermosa antes de revelar el regalo.</p>
        <div style="height: 60px; width: 100%; position: relative; display: flex; justify-content: center;">
            <button id="troll-btn" class="btn-main" onclick="moverBoton()">¬°S√ç, SOY YO! üòç</button>
        </div>
        <button class="btn-ghost" onclick="showStep(3)">No soy yo (Peligro)</button>
    </div>

    <div id="step3" class="card hidden">
        <img src="https://media.tenor.com/YTs_C7Y48v0AAAAi/cat-crying.gif" style="width:100px; margin-bottom:15px;">
        <h2>¬øC√ìMO QUE NO? ü•∫</h2>
        <p>Si dices que no eres t√∫, el sistema interpretar√° que eres un intruso y borrar√° todos los recuerdos de estos 4 meses.</p>
        <button class="btn-main" id="fake-delete-btn" onmouseover="transformBtn()" onclick="showStep(4)">¬°MENTIRA! S√ç SOY YO üò±</button>
    </div>

    <div id="step4" class="card hidden">
        <h2 style="color: #ff3333;">FALLO EN EL N√öCLEO</h2>
        <div class="error-console" id="console"></div>
        <button id="repair-btn" class="btn-main hidden" onclick="showStep(5)" style="margin-top:15px;">INTENTAR RECUPERACI√ìN ‚ù§Ô∏è</button>
    </div>

    <div id="step5" class="card hidden">
        <img src="https://media.tenor.com/YZA_f_6xO8AAAAAi/tkthao219-bubududu.gif" style="width:100px;">
        <h2>Nivel de Amor Requerido</h2>
        <p>Para restaurar los archivos, el sensor de presi√≥n debe detectar cu√°nto me amas.</p>
        <div style="height: 100px; display: flex; align-items: center; justify-content: center;">
            <button id="shrink-btn" class="btn-main" style="width: auto; padding: 15px 40px;" onclick="showStep(6)">¬°S√ç, MUCHO! ‚ù§Ô∏è</button>
        </div>
    </div>

    <div id="step6" class="card hidden">
        <h1>Mi Ana... ‚ù§Ô∏è</h1>
        <div class="letter-content">
            <p><strong>Feliz cumplea√±os, mi Ana. Hoy celebro tu vida.</strong></p>
            <p>Celebro el d√≠a en que llegaste a este mundo y el d√≠a en que llegaste al m√≠o. Aunque estas palabras son un regalo, son solo un intento de expresar todo lo que siento.</p>
            <p>Han pasado cuatro meses desde que nuestras vidas se cruzaron y siento que hemos vivido una historia entera. Nos encontramos sin buscarnos, casi como un susurro del destino.</p>
            <p>Contigo aprend√≠ que el amor se construye en risas peque√±as, en noches largas y en silencios que no incomodan. Pero tambi√©n aprend√≠ que el amor verdadero se pone a prueba, duele... y aun as√≠ decide quedarse.</p>
            <p>Gracias por volver, por elegir intentarlo de nuevo, por permitirnos sanar y por crecer conmigo. Te amo con paciencia, con un amor que no busca poseer, sino acompa√±ar.</p>
            <p>Te deseo paz en el coraz√≥n, sue√±os que te ilusionen y que nunca olvides lo especial que eres. Yo estoy aqu√≠, sincero, con ganas de seguir escribiendo esta historia contigo.</p>
            <p style="text-align: right;"><strong>Con todo mi amor, Maykel</strong></p>
        </div>
        <button class="btn-main" onclick="showStep(7)">Ver video ‚ù§Ô∏è</button>
    </div>

    <div id="step7" class="card hidden">
        <div class="video-container">
            <video id="final-video" controls playsinline muted>
                <source src="https://www.dropbox.com/scl/fi/t1eazjksgs58bkmu1mxi5/user-G0Svz1V0bF0yeTK1ti0WMfRZ_gen_01kdzw4t35ektvm604krzzcv19_watermarked.mp4?rlkey=n0eomxos434ci17tnllcnysvm&st=7u8z5pt9&dl=1" type="video/mp4">
            </video>
        </div>
        <div id="video-final-msg"></div>
        <button id="final-reset-btn" class="btn-main hidden" style="margin-top: 20px;" onclick="location.reload()">Ver de nuevo ‚ù§Ô∏è</button>
    </div>

    <script>
        const audio = document.getElementById('pookie-audio');
        let shrinkScale = 1;

        function iniciarExperiencia() { audio.play(); showStep(2); }

        function showStep(n) {
            document.querySelectorAll('.card').forEach(c => c.classList.add('hidden'));
            document.getElementById('step' + n).classList.remove('hidden');
            if(n === 7) {
                document.body.classList.add('allow-scroll');
                const v = document.getElementById('final-video');
                v.play();
                v.onended = () => { 
                    typeWriter("Feliz cumplea√±os Mi Amor, ese d√≠a y esa hora en la que decid√≠ entrar a ese juego han sido de las mejores decisiones de mi vida");
                };
            } else {
                document.body.classList.remove('allow-scroll');
            }
            if(n === 4) runFakeError();
            if(n === 5) initShrinkTroll();
        }

        function runFakeError() {
            const box = document.getElementById('console');
            const logs = [
                "> Iniciando protocolo de borrado...",
                "> Localizando base de datos 'Nosotros'...",
                "> Eliminando recuerdos de 4 meses...",
                "> ADVERTENCIA: Bloqueo emocional detectado.",
                "> Buscando archivos de respaldo...",
                "> Error: Maykel.exe no permite borrar a Ana.",
                "> Coraz√≥n sobrecalentado...",
                "> Restaurando sorpresa para la princesa..."
            ];
            let i = 0;
            const timer = setInterval(() => {
                if(i < logs.length) box.innerHTML += logs[i++] + "<br>";
                else { clearInterval(timer); document.getElementById('repair-btn').classList.remove('hidden'); }
            }, 1000);
        }

        function typeWriter(text) {
            const container = document.getElementById('video-final-msg');
            container.innerHTML = "";
            text.split("").forEach((char, i) => {
                const span = document.createElement('span');
                span.innerText = char === " " ? "\u00A0" : char; // Mantiene espacios reales
                span.className = 'typewriter-char';
                span.style.animationDelay = (i * 0.08) + "s";
                container.appendChild(span);
            });
            setTimeout(() => document.getElementById('final-reset-btn').classList.remove('hidden'), text.length * 80 + 1000);
        }

        function moverBoton() {
            const btn = document.getElementById('troll-btn');
            btn.style.position = 'fixed';
            btn.style.left = Math.random() * (window.innerWidth - 150) + 'px';
            btn.style.top = Math.random() * (window.innerHeight - 100) + 'px';
        }

        function transformBtn() {
            const btn = document.getElementById('fake-delete-btn');
            btn.innerText = "¬°BORRAR TODO! üò±"; btn.style.background = "black";
        }

        function initShrinkTroll() {
            const btn = document.getElementById('shrink-btn');
            const handler = (e) => {
                if (shrinkScale > 0.3) {
                    e.preventDefault();
                    shrinkScale -= 0.15;
                    btn.style.transform = `scale(${shrinkScale})`;
                }
            };
            btn.addEventListener('touchstart', handler);
            btn.addEventListener('mouseover', handler);
        }
    </script>
</body>
</html>
