<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Para mi Ana ‚ù§Ô∏è</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Quicksand:wght@400;600;700&family=Courier+Prime:wght@400;700&display=swap" rel="stylesheet">
    <style>
        * { box-sizing: border-box; -webkit-font-smoothing: antialiased; touch-action: manipulation; }
        
        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            overflow: hidden; font-family: 'Quicksand', sans-serif;
            display: flex; align-items: center; justify-content: center;
            background: #0b0b1a url('https://images.unsplash.com/photo-1462331940025-496dfbfc7564?q=80&w=1000') no-repeat center center;
            background-size: cover;
        }

        .overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: radial-gradient(circle, rgba(0,0,0,0.1) 0%, rgba(0,0,0,0.6) 100%); z-index: 1; }

        .card {
            position: relative; z-index: 10;
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(25px); -webkit-backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 40px;
            padding: 45px 30px;
            width: 92%; max-width: 420px; min-height: 520px;
            display: flex; flex-direction: column;
            justify-content: space-between;
            align-items: center;
            text-align: center; color: white;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
        }

        .title-top { font-family: 'Dancing Script'; font-size: 2.4rem; margin: 0; align-self: stretch; }
        .text-mid { font-size: 1.05rem; line-height: 1.5; margin: 20px 0; flex-grow: 1; display: flex; align-items: center; justify-content: center; }
        
        .error-console { 
            color: #ff4d4d; font-family: 'Courier Prime', monospace; font-size: 0.8rem; text-align: left; 
            background: rgba(0,0,0,0.7); padding: 15px; border-radius: 20px; 
            width: 100%; height: 360px; border: 1px solid rgba(255, 77, 77, 0.3); overflow-y: auto;
            line-height: 1.6; margin: 10px 0;
        }

        .progress-container { width: 100%; background: rgba(0,0,0,0.3); border-radius: 20px; height: 20px; margin-bottom: 20px; border: 1px solid rgba(255,255,255,0.1); overflow: hidden; display: none; }
        .progress-bar { height: 100%; width: 0%; background: linear-gradient(90deg, #ff416c, #ff99cc); transition: width 0.2s ease; }

        .btn-main {
            background: linear-gradient(45deg, #ff416c, #ff4b2b);
            border: none; padding: 18px 0; border-radius: 50px;
            color: white; font-size: 1.1rem; font-weight: 700;
            width: 100%; max-width: 280px; cursor: pointer;
            box-shadow: 0 8px 20px rgba(255, 65, 108, 0.4);
            text-transform: uppercase; user-select: none;
        }

        .typewriter-box {
            text-align: left; font-family: 'Courier Prime', monospace; font-size: 0.9rem;
            height: 360px; overflow-y: auto; width: 100%;
            padding: 18px; background: rgba(0,0,0,0.3); border-radius: 20px;
            line-height: 1.6; color: #fff; margin-bottom: 15px;
            white-space: pre-wrap; 
        }

        .video-container { width: 100%; border-radius: 20px; overflow: hidden; border: 2px solid rgba(255, 153, 204, 0.5); background: #000; margin-bottom: 15px; }
        video { width: 100%; max-height: 220px; display: block; background: #000; }
        
        #video-final-msg { 
            width: 100%; font-family: 'Quicksand', sans-serif; font-size: 1.25rem; 
            font-weight: 700; font-style: italic; color: #fff; 
            text-shadow: 0 0 10px rgba(255, 153, 204, 0.8); 
            padding: 10px; line-height: 1.4;
        }

        .word-anim { 
            opacity: 0; display: inline-block; 
            animation: wordFade 0.5s forwards; 
            margin-right: 5px;
        }
        @keyframes wordFade { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }

        .hidden { display: none !important; }
    </style>
</head>
<body>

    <div class="overlay"></div>

    <audio id="pookie-audio" loop><source src="https://www.dropbox.com/scl/fi/i8pjh6dor59ef4xzu6hsf/Ed-Sheeran-Photograph-Subtitulado-al-Espa-ol..mp3?rlkey=vpe1cixqj20q3h7six0odizjb&raw=1" type="audio/mpeg"></audio>

    <div id="step1" class="card">
        <h1 class="title-top">Hola Ana ‚ù§Ô∏è</h1>
        <div class="text-mid">He construido este espacio porque las palabras a veces se quedan cortas para decirte todo lo que significas. ¬øEst√°s lista para ver lo que he guardado para ti?</div>
        <button class="btn-main" onclick="iniciarExperiencia()">Abrir Coraz√≥n</button>
    </div>

    <div id="step2" class="card hidden">
        <h2 class="title-top">Identificaci√≥n üëë</h2>
        <div class="text-mid" style="flex-direction: column;">
            <div style="width: 140px; height: 140px; border-radius: 25px; border: 3px solid rgba(255,255,255,0.4); overflow: hidden; margin-bottom: 15px;">
                <img src="https://www.dropbox.com/scl/fi/kktnissm1iyzltkt0bj7v/8f214fd9-fee4-4ce7-a275-17b4b6437de4.jpg?rlkey=qjqvxraqhbzdanaulrurjd2wj&raw=1" style="width:100%; height:100%; object-fit:cover;">
            </div>
            Solo la mujer m√°s hermosa y especial de este mundo tiene permiso para cruzar este portal. ¬øConfirmas que eres t√∫?
        </div>
        <div style="width:100%; display:flex; flex-direction:column; align-items:center;">
            <button id="troll-btn" class="btn-main" onclick="moverBoton()">¬°S√ç, SOY YO! üòç</button>
            <button onclick="showStep(3)" style="background:transparent; border:none; color:rgba(255,255,255,0.5); margin-top:15px; text-decoration: underline;">No soy yo...</button>
        </div>
    </div>

    <div id="step3" class="card hidden">
        <h2 class="title-top">¬øEst√°s segura? ü•∫</h2>
        <div class="text-mid">Negar tu identidad no solo es mentirle al sistema, es arriesgarte a que cada recuerdo, cada risa y cada momento que hemos construido en estos 4 meses se borre para siempre de esta base de datos emocional.</div>
        <button class="btn-main" id="fake-delete-btn" onmouseover="transformBtn()" onclick="showStep(4)">¬°DETENER! S√ç SOY YO üò±</button>
    </div>

    <div id="step4" class="card hidden">
        <h2 style="color: #ff4d4d; font-family: 'Courier Prime'; font-size: 1.1rem; margin: 0;">FALLO CR√çTICO DETECTADO</h2>
        <div class="error-console" id="console"></div>
        <button id="repair-btn" class="btn-main hidden" onclick="showStep(5)">FORZAR REPARACI√ìN ‚ù§Ô∏è</button>
    </div>

    <div id="step5" class="card hidden">
        <h2 class="title-top">Cargando Amor ‚ú®</h2>
        <div class="text-mid" id="amor-instruccion">El n√∫cleo central ha quedado vac√≠o por el error. Necesito que transfieras toda tu energ√≠a presionando el bot√≥n. Demu√©strame cu√°nto me amas para restaurar el acceso.</div>
        <div style="width:100%;">
            <div class="progress-container" id="p-cont" style="display: block;"><div class="progress-bar" id="p-bar"></div></div>
            <button id="btn-amor" class="btn-main" onclick="llenarBarra()">TAC TAC ‚ù§Ô∏è</button>
        </div>
    </div>

    <div id="step6" class="card hidden">
        <h1 class="title-top">Para Mi Ana... ‚ù§Ô∏è</h1>
        <div class="typewriter-box" id="letter-box"></div>
        <button id="btn-to-video" class="btn-main hidden" onclick="showStep(7)">Ver video ‚ù§Ô∏è</button>
    </div>

    <div id="step7" class="card hidden">
        <h2 class="title-top" style="font-size: 1.8rem;">Un mensaje final...</h2>
        <div class="video-container">
            <video id="final-video" controls playsinline>
                <source src="https://www.dropbox.com/scl/fi/t1eazjksgs58bkmu1mxi5/user-G0Svz1V0bF0yeTK1ti0WMfRZ_gen_01kdzw4t35ektvm604krzzcv19_watermarked.mp4?raw=1" type="video/mp4">
            </video>
        </div>
        <div id="video-final-msg"></div>
        <button id="final-reset-btn" class="btn-main hidden" onclick="location.reload()">Reiniciar ‚ù§Ô∏è</button>
    </div>

    <script>
        const audio = document.getElementById('pookie-audio');
        const video = document.getElementById('final-video');
        let amorProgreso = 0;

        const cartaTexto = `Feliz cumplea√±os, mi Ana. Hoy celebro tu vida.

Celebro el d√≠a en que llegaste a este mundo y, sin saberlo, el d√≠a en que alg√∫n d√≠a llegar√≠as tambi√©n al m√≠o.

(Pega aqu√≠ el resto de tu carta completa)

Con todo mi amor, Maykel`;

        function iniciarExperiencia() { audio.play(); showStep(2); }

        function showStep(n) {
            document.querySelectorAll('.card').forEach(c => c.classList.add('hidden'));
            document.getElementById('step' + n).classList.remove('hidden');
            if(n === 4) runFakeError();
            if(n === 6) startTypewriter();
            if(n === 7) {
                video.play().catch(() => { video.muted = true; video.play(); });
                video.onended = () => typeWordByWord("Feliz cumplea√±os Mi Amor, ese d√≠a y esa hora en la que decid√≠ entrar a ese juego han sido de las mejores decisiones de mi vida");
            }
        }

        function runFakeError() {
            const box = document.getElementById('console');
            const logs = [
                "> Iniciando protocolo de borrado...", "> Localizando base de datos 'Nosotros'...", "> Error: Maykel_System deniega el acceso.", "> Intentando forzar formateo...", "> ADVERTENCIA: Bloqueo emocional detectado.", "> Buscando archivos de respaldo...", "> [!] ERROR: Ana.love es un archivo de sistema vital.", "> Coraz√≥n sobrecalentado...", "> El sistema detecta resistencia emocional...", "> No se pueden eliminar las risas...", "> No se pueden eliminar los juegos juntos...", "> Recuperando fragmentos de felicidad...", "> Restaurando sector 'Confianza'...", "> Optimizando latidos por minuto...", "> Error 502: La distancia es irrelevante.", "> Reconectando con el coraz√≥n de Ana...", "> [OK] Sincronizaci√≥n completa.", "> Cargando 'Futuro_Juntos.exe'...", "> [SISTEMA] Ana es la prioridad absoluta.", "> Acceso concedido.",
                "> Analizando latidos... Ritmo anormal detectado.", "> Diagn√≥stico: Amor profundo e irreversible.", "> Intentando borrar 'Esa primera vez'... FALLO.", "> Intentando borrar 'Nuestras charlas'... FALLO.", "> Protegiendo la carpeta 'Sus risas'...", "> Reforzando seguridad en 'Nuestros sue√±os'...", "> Aviso: El n√∫cleo de Maykel solo acepta a Ana.", "> Sincronizando alma.sys con princesa.ana...", "> Limpiando errores del pasado... 100% completado.", "> Instalando parche 'Felicidad Eterna'...", "> Buscando el mejor regalo del mundo...", "> Resultado: Ella ya es el regalo.", "> Preparando sorpresa de cumplea√±os...", "> Verificando nivel de hermosura... Fuera de rango.", "> [√âXITO] Sistema restaurado con amor infinito."
            ];
            let i = 0;
            function printLog() {
                if (i < logs.length) {
                    box.innerHTML += logs[i++] + "<br>";
                    box.scrollTop = box.scrollHeight;
                    setTimeout(printLog, i <= 15 ? 2800 : 3800);
                } else { document.getElementById('repair-btn').classList.remove('hidden'); }
            }
            printLog();
        }

        function llenarBarra() {
            if(amorProgreso < 100) { amorProgreso += 5; document.getElementById('p-bar').style.width = amorProgreso + "%"; }
            if(amorProgreso >= 100) {
                document.getElementById('btn-amor').classList.add('hidden');
                document.getElementById('amor-instruccion').innerHTML = "<span style='color:#ff99cc; font-weight:bold;'>¬°Carga completada! ‚ù§Ô∏è</span>";
                setTimeout(() => showStep(6), 3000);
            }
        }

        function startTypewriter() {
            const box = document.getElementById('letter-box');
            let i = 0;
            const timer = setInterval(() => {
                if(i < cartaTexto.length) {
                    box.textContent += cartaTexto.charAt(i++);
                    box.scrollTop = box.scrollHeight;
                } else { clearInterval(timer); document.getElementById('btn-to-video').classList.remove('hidden'); }
            }, 40);
        }

        function typeWordByWord(text) {
            const container = document.getElementById('video-final-msg');
            container.innerHTML = "";
            const words = text.split(" ");
            words.forEach((word, i) => {
                const span = document.createElement('span');
                span.innerText = word;
                span.className = 'word-anim';
                span.style.animationDelay = (i * 0.2) + "s";
                container.appendChild(span);
            });
            setTimeout(() => document.getElementById('final-reset-btn').classList.remove('hidden'), words.length * 200 + 1000);
        }

        function moverBoton() {
            const btn = document.getElementById('troll-btn');
            btn.style.position = 'fixed';
            btn.style.left = Math.random() * (window.innerWidth - 180) + 'px';
            btn.style.top = Math.random() * (window.innerHeight - 80) + 'px';
        }

        function transformBtn() {
            const btn = document.getElementById('fake-delete-btn');
            btn.innerText = "¬°S√ç SOY YO! üò≠"; btn.style.background = "black";
        }
    </script>
</body>
</html>
