<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Para mi Ana ‚ù§Ô∏è</title>
    <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@700&family=Quicksand:wght@400;600&family=Courier+Prime:ital,wght@0,400;0,700;1,400&display=swap" rel="stylesheet">
    <style>
        * { box-sizing: border-box; -webkit-font-smoothing: antialiased; }
        
        body, html {
            margin: 0; padding: 0; width: 100%; height: 100%;
            overflow: hidden; font-family: 'Quicksand', sans-serif;
            display: flex; align-items: center; justify-content: center;
            background: #0b0b1a url('https://images.unsplash.com/photo-1462331940025-496dfbfc7564?q=80&w=1000') no-repeat center center;
            background-size: cover;
        }

        .overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: radial-gradient(circle, rgba(0,0,0,0.1) 0%, rgba(0,0,0,0.5) 100%); z-index: 1; }

        .card {
            position: relative; z-index: 10;
            background: rgba(255, 255, 255, 0.08);
            backdrop-filter: blur(25px); -webkit-backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 255, 255, 0.25);
            border-radius: 35px; padding: 30px 20px;
            width: 90%; max-width: 420px; min-height: 520px;
            margin: auto; display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            text-align: center; color: white;
            box-shadow: 0 25px 50px rgba(0, 0, 0, 0.5);
        }

        .error-console { 
            color: #ff3333; font-family: 'Courier Prime', monospace; font-size: 0.75rem; text-align: left; 
            background: rgba(0,0,0,0.85); padding: 15px; border-radius: 15px; 
            width: 100%; height: 320px; border: 1px solid #ff3333; overflow-y: auto;
            line-height: 1.5;
        }

        .progress-container { width: 100%; background: rgba(255,255,255,0.1); border-radius: 20px; height: 25px; margin: 20px 0; border: 1px solid rgba(255,255,255,0.3); overflow: hidden; display: none; }
        .progress-bar { height: 100%; width: 0%; background: linear-gradient(90deg, #ff416c, #ff4b2b); transition: width 0.2s ease; }

        .typewriter-box {
            text-align: left; font-family: 'Courier Prime', monospace; font-size: 0.92rem;
            height: 330px; overflow-y: auto; width: 100%;
            padding: 15px; background: rgba(0,0,0,0.2); border-radius: 15px;
            line-height: 1.5; color: #fff; margin-bottom: 15px;
            white-space: pre-wrap;
        }

        #cursor { border-left: 2px solid #ff99cc; animation: blink 0.7s infinite; margin-left: 2px; }
        @keyframes blink { 50% { border-color: transparent; } }

        .btn-main {
            background: linear-gradient(45deg, #ff416c, #ff4b2b);
            border: none; padding: 16px 0; border-radius: 50px;
            color: white; font-size: 1.1rem; font-weight: 700;
            width: 100%; max-width: 260px; cursor: pointer;
            box-shadow: 0 10px 25px rgba(255, 65, 108, 0.4);
            text-transform: uppercase; letter-spacing: 1px;
        }

        .video-container { width: 100%; border-radius: 15px; overflow: hidden; border: 2px solid #ff99cc; background: #000; margin-bottom: 10px; }
        video { width: 100%; max-height: 220px; display: block; }
        
        /* SOLUCI√ìN AL TEXTO QUE SE ROMPE */
        #video-final-msg { 
            width: 100%; font-family: 'Dancing Script', cursive; font-size: 1.5rem; 
            color: #fff; text-shadow: 0 0 10px rgba(255, 0, 255, 0.5); min-height: 100px;
            padding: 10px; text-align: center;
            line-height: 1.3;
            overflow-wrap: break-word; /* Asegura que el contenedor respete los bordes */
        }

        .char-final { 
            opacity: 0; 
            display: inline; /* Cambiado de inline-block a inline para evitar rupturas de palabra */
            animation: charFade 0.4s forwards; 
        }
        @keyframes charFade { from { opacity: 0; } to { opacity: 1; } }

        .hidden { display: none !important; }
    </style>
</head>
<body>

    <div class="overlay"></div>

    <audio id="pookie-audio" loop><source src="https://www.dropbox.com/scl/fi/i8pjh6dor59ef4xzu6hsf/Ed-Sheeran-Photograph-Subtitulado-al-Espa-ol..mp3?rlkey=vpe1cixqj20q3h7six0odizjb&st=2robfvey&dl=1" type="audio/mpeg"></audio>
    <audio id="typing-sound" loop><source src="https://www.soundjay.com/communication/typewriter-mechanical-1.mp3" type="audio/mpeg"></audio>

    <div id="step1" class="card">
        <h1 style="font-size: 3rem;">Hola Ana ‚ù§Ô∏è</h1>
        <p>¬øLista para tu sorpresa?<br>Haz clic para entrar.</p>
        <button class="btn-main" onclick="iniciarExperiencia()">Amonos</button>
    </div>

    <div id="step2" class="card hidden">
        <div style="width: 150px; height: 150px; border-radius: 20px; border: 3px solid #ff99cc; overflow: hidden; margin-bottom: 15px;">
            <img src="https://www.dropbox.com/scl/fi/kktnissm1iyzltkt0bj7v/8f214fd9-fee4-4ce7-a275-17b4b6437de4.jpg?rlkey=qjqvxraqhbzdanaulrurjd2wj&st=dswefh8d&dl=1" style="width:100%; height:100%; object-fit:cover;">
        </div>
        <h2>Paso 1: Seguridad</h2>
        <p>¬øEres t√∫ la mujer m√°s hermosa de este mundo?</p>
        <div style="height: 60px; width: 100%; position: relative; display: flex; justify-content: center;">
            <button id="troll-btn" class="btn-main" onclick="moverBoton()">¬°S√ç, SOY YO! üòç</button>
        </div>
        <button onclick="showStep(3)" style="background:transparent; border:none; color:rgba(255,255,255,0.6); margin-top:15px; cursor:pointer; font-size: 1.1rem; font-weight: 600;">No soy yo...</button>
    </div>

    <div id="step3" class="card hidden">
        <img src="https://media.tenor.com/YTs_C7Y48v0AAAAi/cat-crying.gif" style="width:80px; margin-bottom:10px;">
        <h2>¬øEST√ÅS SEGURA? ü•∫</h2>
        <p>Si confirmas esto, el sistema borrar√° cada recuerdo, cada mensaje y cada momento juntos.</p>
        <button class="btn-main" id="fake-delete-btn" onmouseover="transformBtn()" onclick="showStep(4)">¬°DETENER! S√ç SOY YO üò±</button>
    </div>

    <div id="step4" class="card hidden">
        <h2 style="color: #ff3333;">FALLO CR√çTICO DE ACCESO</h2>
        <div class="error-console" id="console"></div>
        <button id="repair-btn" class="btn-main hidden" onclick="showStep(5)">REPARAR ACCESO ‚ù§Ô∏è</button>
    </div>

    <div id="step5" class="card hidden">
        <img src="https://media.tenor.com/YZA_f_6xO8AAAAAi/tkthao219-bubududu.gif" style="width:90px;">
        <h2>Sincronizaci√≥n de Afecto</h2>
        <p id="amor-instruccion">El n√∫cleo requiere energ√≠a. Pulsa repetidamente para demostrar cu√°nto me amas y liberar el acceso.</p>
        <div class="progress-container" id="p-cont" style="display: block;">
            <div class="progress-bar" id="p-bar"></div>
        </div>
        <button id="btn-amor" class="btn-main" onclick="llenarBarra()">TAC TAC ‚ù§Ô∏è</button>
    </div>

    <div id="step6" class="card hidden">
        <h1 style="font-size: 2rem;">Para Mi Ana... ‚ù§Ô∏è</h1>
        <div class="typewriter-box" id="letter-box"><span id="letter-text"></span><span id="cursor"></span></div>
        <button id="btn-to-video" class="btn-main hidden" onclick="showStep(7)">Ver video ‚ù§Ô∏è</button>
    </div>

    <div id="step7" class="card hidden">
        <div class="video-container">
            <video id="final-video" controls playsinline muted>
                <source src="https://www.dropbox.com/scl/fi/t1eazjksgs58bkmu1mxi5/user-G0Svz1V0bF0yeTK1ti0WMfRZ_gen_01kdzw4t35ektvm604krzzcv19_watermarked.mp4?rlkey=n0eomxos434ci17tnllcnysvm&st=7u8z5pt9&dl=1" type="video/mp4">
            </video>
        </div>
        <div id="video-final-msg"></div>
        <button id="final-reset-btn" class="btn-main hidden" onclick="location.reload()" style="margin-top: 10px;">Ver de nuevo ‚ù§Ô∏è</button>
    </div>

    <script>
        const audio = document.getElementById('pookie-audio');
        const typeSound = document.getElementById('typing-sound');
        let amorProgreso = 0;

        const cartaTexto = `Feliz cumplea√±os, mi Ana. Hoy celebro tu vida.

Celebro el d√≠a en que llegaste a este mundo y, sin saberlo, el d√≠a en que alg√∫n d√≠a llegar√≠as tambi√©n al m√≠o.

Y aunque estas palabras son un regalo, en realidad son solo un intento ‚Äîimperfecto‚Äî de expresar todo lo que siento por ti. Han pasado apenas cuatro meses desde que nuestras vidas se cruzaron, y aun as√≠ siento que en ese corto tiempo hemos vivido una historia entera.

Nos encontramos sin buscarnos, casi como un susurro del destino. Primero fue una coincidencia, luego una conversaci√≥n, despu√©s una costumbre‚Ä¶ y sin darnos cuenta, nos convertimos en hogar el uno para el otro.

Contigo aprend√≠ que el amor no siempre llega con ruido, sino con calma. Que a veces se construye en risas peque√±as, en noches largas, en juegos compartidos, en pel√≠culas vistas juntos, en silencios que no incomodan.

Pero tambi√©n aprend√≠ que amar no es f√°cil. Que el amor verdadero se pone a prueba, duele, tambalea‚Ä¶ y aun as√≠ decide quedarse. Hemos pasado por momentos hermosos y por momentos dif√≠ciles. Hubo d√≠as en los que sent√≠ miedo de perderte, noches en las que el silencio pes√≥ demasiado y emociones que nos desbordaron a ambos.

Pero aqu√≠ estamos. Y eso, para m√≠, significa todo. Gracias por volver, por mirar hacia nosotros, por elegir intentarlo de nuevo. Gracias por abrir tu coraz√≥n cuando no era f√°cil hacerlo, por permitirnos sanar, por crecer conmigo.

Quiero que sepas que te amo no solo por quien eres cuando todo va bien, sino tambi√©n por quien eres cuando dudas, cuando te cierras, cuando te cuesta. Te amo con conciencia, con paciencia, con un amor que no busca poseer, sino acompa√±ar.

Te amo queriendo cuidarte, queriendo caminar contigo, queriendo construir algo real y bonito, paso a paso. En tu cumplea√±os no solo te deseo felicidad. Te deseo paz en el coraz√≥n.

Yo estoy aqu√≠. No perfecto, pero sincero. Con el mismo amor que naci√≥ al principio, pero ahora m√°s fuerte, m√°s profundo y m√°s consciente. Gracias por existir, Ana. Gracias por estos cuatro meses y gracias por seguir aqu√≠.

Con todo mi amor, Maykel`;

        function iniciarExperiencia() { audio.play(); showStep(2); }

        function showStep(n) {
            document.querySelectorAll('.card').forEach(c => c.classList.add('hidden'));
            document.getElementById('step' + n).classList.remove('hidden');
            if(n === 4) runFakeError();
            if(n === 6) startTypewriter();
            if(n === 7) {
                const v = document.getElementById('final-video');
                v.play();
                v.onended = () => typeWriterFinal("Feliz cumplea√±os Mi Amor, ese d√≠a y esa hora en la que decid√≠ entrar a ese juego han sido de las mejores decisiones de mi vida");
            }
        }

        function runFakeError() {
            const box = document.getElementById('console');
            const logs = [
                "> Iniciando protocolo de borrado...", "> Localizando base de datos 'Nosotros'...", "> Error: Maykel_System deniega el acceso.", "> Intentando forzar formateo...", "> ADVERTENCIA: Bloqueo emocional detectado.", "> Buscando archivos de respaldo...", "> [!] ERROR: Ana.love es un archivo de sistema vital.", "> Coraz√≥n sobrecalentado...", "> El sistema detecta resistencia emocional...", "> No se pueden eliminar las risas...", "> No se pueden eliminar los juegos juntos...", "> Recuperando fragmentos de felicidad...", "> Restaurando sector 'Confianza'...", "> Optimizando latidos por minuto...", "> Error 502: La distancia es irrelevante.", "> Reconectando con el coraz√≥n de Ana...", "> [OK] Sincronizaci√≥n completa.", "> Cargando 'Futuro_Juntos.exe'...", "> [SISTEMA] Ana es la prioridad absoluta.", "> Acceso concedido.",
                "> Analizando latidos... Ritmo anormal detectado.", "> Diagn√≥stico: Amor profundo e irreversible.", "> Intentando borrar 'Esa primera vez'... FALLO.", "> Intentando borrar 'Nuestras charlas'... FALLO.", "> Protegiendo la carpeta 'Sus risas'...", "> Reforzando seguridad en 'Nuestros sue√±os'...", "> Aviso: El n√∫cleo de Maykel solo acepta a Ana.", "> Sincronizando alma.sys con princesa.ana...", "> Limpiando errores del pasado... 100% completado.", "> Instalando parche 'Felicidad Eterna'...", "> Buscando el mejor regalo del mundo...", "> Resultado: Ella ya es el regalo.", "> Preparando sorpresa de cumplea√±os...", "> Verificando nivel de hermosura... Fuera de rango.", "> [√âXITO] Sistema restaurado con amor infinito."
            ];
            
            let i = 0;
            function printLog() {
                if (i < logs.length) {
                    box.innerHTML += logs[i++] + "<br>";
                    box.scrollTop = box.scrollHeight;
                    
                    // VELOCIDAD DIN√ÅMICA: 
                    // Si i <= 15 -> 1.4s (R√°pido/Normal)
                    // Si i > 15 -> 2.2s (Mucho m√°s lento para lectura clara)
                    let delay = i <= 15 ? 1400 : 2200;
                    setTimeout(printLog, delay);
                } else {
                    document.getElementById('repair-btn').classList.remove('hidden');
                }
            }
            printLog();
        }

        function llenarBarra() {
            if(amorProgreso < 100) {
                amorProgreso += 5;
                document.getElementById('p-bar').style.width = amorProgreso + "%";
            }
            if(amorProgreso >= 100) {
                document.getElementById('btn-amor').classList.add('hidden');
                document.getElementById('amor-instruccion').innerHTML = "<span style='color:#ff99cc; font-weight:bold; font-size: 1.1rem;'>¬°Carga completada! ‚ù§Ô∏è<br>Sincronizaci√≥n emocional al 100%.<br>Abriendo carta de Maykel...</span>";
                setTimeout(() => showStep(6), 3500);
            }
        }

        function startTypewriter() {
            const target = document.getElementById('letter-text');
            let i = 0; typeSound.play();
            const timer = setInterval(() => {
                if (i < cartaTexto.length) {
                    target.textContent += cartaTexto.charAt(i++);
                    document.getElementById('letter-box').scrollTop = document.getElementById('letter-box').scrollHeight;
                } else {
                    clearInterval(timer); typeSound.pause();
                    document.getElementById('cursor').style.display = 'none';
                    document.getElementById('btn-to-video').classList.remove('hidden');
                }
            }, 40);
        }

        function typeWriterFinal(text) {
            const container = document.getElementById('video-final-msg');
            container.innerHTML = "";
            text.split("").forEach((char, i) => {
                const span = document.createElement('span');
                // IMPORTANTE: Los espacios deben ser un espacio normal para que el navegador sepa d√≥nde romper l√≠nea
                span.innerText = char;
                span.className = 'char-final';
                span.style.animationDelay = (i * 0.08) + "s";
                container.appendChild(span);
            });
            setTimeout(() => document.getElementById('final-reset-btn').classList.remove('hidden'), text.length * 80 + 1000);
        }

        function moverBoton() {
            const btn = document.getElementById('troll-btn');
            btn.style.position = 'fixed';
            btn.style.left = Math.random() * (window.innerWidth - 180) + 'px';
            btn.style.top = Math.random() * (window.innerHeight - 80) + 'px';
        }

        function transformBtn() {
            const btn = document.getElementById('fake-delete-btn');
            btn.innerText = "¬°S√ç SOY YO! üò≠"; btn.style.background = "black";
        }
    </script>
</body>
</html>
